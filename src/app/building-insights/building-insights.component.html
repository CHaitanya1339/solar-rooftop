<!-- solar-data-panel.component.html -->
<div class="bg-dark text-white" *ngIf="!showErrorLayer && !showLoader">
  <ng-container *ngIf="configId">
    <!-- Top Section: Sunshine, Roof Area, CO2 Savings -->
    <div class="bg-dark py-12 sm:py-16">
      <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <dl class="grid grid-cols-1 gap-x-8 gap-y-16 text-center lg:grid-cols-3">
          <div class="mx-auto flex max-w-xs flex-col gap-y-4">
            <dt class="text-base leading-7 text-white-600 value-text">Sunshine over the year</dt>
            <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
              {{buildingInsights.solarPotential.maxSunshineHoursPerYear}} hours
            </dd>
          </div>
          <div class="mx-auto flex max-w-xs flex-col gap-y-4">
            <dt class="text-base leading-7 text-white-600 value-text">Of Roof Area</dt>
            <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
              {{buildingInsights.solarPotential.wholeRoofStats.areaMeters2.toFixed(2)}} mÂ²
            </dd>
          </div>
          <div class="mx-auto flex max-w-xs flex-col gap-y-4">
            <dt class="text-base leading-7 text-white-600 value-text">savings of CO2</dt>
            <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
              {{buildingInsights.solarPotential.carbonOffsetFactorKgPerMwh.toFixed(2)}} Kg
            </dd>
          </div>
        </dl>
      </div>
    </div>
    <div class="flex gap-4 solar-container">
      <!-- Left Container: Solar Data -->
      <div class="w-1/2">
        <div class="bg-gray-900 rounded-3xl shadow-lg ring-1 ring-gray-800 p-4">
          <div class="space-y-4">
            <div class="flex items-center gap-4 p-4 rounded-lg hover:bg-gray-800">
              <div class="flex-shrink-0 w-11 h-11 flex items-center justify-center rounded-lg bg-gray-800">
                <svg class="w-6 h-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
                </svg>
              </div>
              <div>
                <span class="font-semibold text-white">Yearly energy</span>
                <p class="text-gray-400">{{yearlyEnergy.toFixed(2)}} MWh</p>
              </div>
            </div>
            <div class="flex items-center gap-4 p-4 rounded-lg hover:bg-gray-800">
              <div class="flex-shrink-0 w-11 h-11 flex items-center justify-center rounded-lg bg-gray-800">
                <svg class="w-6 h-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                </svg>
              </div>
              <div>
                <span class="font-semibold text-white">Installation size</span>
                <p class="text-gray-400">{{installationSizeKw}} kW</p>
              </div>
            </div>
            <div class="flex items-center gap-4 p-4 rounded-lg hover:bg-gray-800">
              <div class="flex-shrink-0 w-11 h-11 flex items-center justify-center rounded-lg bg-gray-800">
                <svg class="w-6 h-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z" />
                </svg>
              </div>
              <div>
                <span class="font-semibold text-white">Installation cost</span>
                <p class="text-gray-400">${{installationCostTotal}}</p>
              </div>
            </div>
            <div class="flex items-center gap-4 p-4 rounded-lg hover:bg-gray-800">
              <div class="flex-shrink-0 w-11 h-11 flex items-center justify-center rounded-lg bg-gray-800">
                <svg class="w-6 h-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h4V4H4v2zm0 6h4v-2H4v2zm0 6h4v-2H4v2zM10 6h4V4h-4v2zm0 6h4v-2h-4v2zm0 6h4v-2h-4v2zM16 6h4V4h-4v2zm0 6h4v-2h-4v2zm0 6h4v-2h-4v2z" />
                </svg>
              </div>
              <div>
                <span class="font-semibold text-white">Max Panel Count</span>
                <p class="mt-1 text-gray-300">{{buildingInsights.solarPotential.maxArrayPanelsCount}} panels</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Container: Slider and Inputs -->
      <div class="w-1/2 bg-gray-900 rounded-3xl shadow-lg ring-1 ring-gray-800 p-4">
        <div class="space-y-6">
          <div>
            <label for="panel-count-slider" class="block text-sm font-medium text-gray-400 mb-2">Panel Count: {{panelCount}}</label>
            <input
              type="range"
              [(ngModel)]="panelCount"
              [min]="1"
              [max]="buildingInsights.solarPotential.maxArrayPanelsCount"
              [step]="1"
              (change)="updateCalculations()"
              [disabled]="true"
              class="w-full bg-gray-700 rounded-lg appearance-none cursor-pointer"
              id="panel-count-slider"
            >
          </div>

          <div class="space-y-4">
            <div>
              <label for="monthly-bill" class="block text-sm font-medium text-gray-400 mb-1">Monthly average energy bill ($)</label>
              <input type="number" id="monthly-bill" [(ngModel)]="monthlyAverageEnergyBillInput" class="w-full bg-gray-800 rounded-md border-gray-700 text-white px-3 py-2" (input)="updateCalculations()">
            </div>
            <div>
              <label for="energy-cost" class="block text-sm font-medium text-gray-400 mb-1">Energy cost per kWh ($)</label>
              <input type="number" id="energy-cost" [(ngModel)]="energyCostPerKwhInput" class="w-full bg-gray-800 rounded-md border-gray-700 text-white px-3 py-2" (input)="updateCalculations()">
            </div>
            <div>
              <label for="solar-incentives" class="block text-sm font-medium text-gray-400 mb-1">Solar incentives ($)</label>
              <input type="number" id="solar-incentives" [(ngModel)]="solarIncentives" class="w-full bg-gray-800 rounded-md border-gray-700 text-white px-3 py-2" (input)="updateCalculations()">
            </div>
            <div>
              <label for="installation-cost" class="block text-sm font-medium text-gray-400 mb-1">Installation cost per Watt ($)</label>
              <input type="number" id="installation-cost" [(ngModel)]="installationCostPerWatt" class="w-full bg-gray-800 rounded-md border-gray-700 text-white px-3 py-2" (input)="updateCalculations()">
            </div>
            <div>
              <label for="panel-capacity" class="block text-sm font-medium text-gray-400 mb-1">Panel capacity (Watts)</label>
              <input type="number" id="panel-capacity" [(ngModel)]="panelCapacityWattsInput" class="w-full bg-gray-800 rounded-md border-gray-700 text-white px-3 py-2" (input)="updateCalculations()">
            </div>
          </div>
        </div>
      </div>

          </div>
          <div class="bg-dark py-12 sm:py-16">
            <div class="mx-auto max-w-7xl px-6 lg:px-8">
              <dl class="grid grid-cols-1 gap-x-8 gap-y-16 text-center lg:grid-cols-3">
                <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                  <dt class="text-base leading-7 text-white-600 value-text">Cost without Solar</dt>
                  <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
                    ${{totalCostWithoutSolar.toFixed(2)}}
                  </dd>
                </div>
                <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                  <dt class="text-base leading-7 text-white-600 value-text">Cost with Solar</dt>
                  <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
                    ${{totalCostWithSolar.toFixed(2)}}
                  </dd>
                </div>
                <div class="mx-auto flex max-w-xs flex-col gap-y-4">
                  <dt class="text-base leading-7 text-white-600 value-text">Savings</dt>
                  <dd class="order-first text-3xl font-semibold tracking-tight text-white-900 sm:text-5xl">
                    ${{(totalCostWithoutSolar - totalCostWithSolar).toFixed(2)}}
                  </dd>
                </div>
              </dl>
            </div>
          </div>
        </ng-container>
      </div>

<div *ngIf="showErrorLayer">
  <main class="grid min-h-full place-items-center bg-black px-6 py-24 sm:py-32 lg:px-8">
    <div class="text-center">
      <p class="text-base font-semibold text-indigo-600">404</p>
      <h1 class="mt-4 text-3xl font-bold tracking-tight text-black-900 sm:text-5xl">buildingInsights not found</h1>
      <p class="mt-6 text-base leading-7 text-black-600">We'll be back soon at your location, Stay tuned!</p>
      <div class="mt-10 flex items-center justify-center gap-x-6">
        <a (click)="goBack()" class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Go back</a>
      </div>
    </div>
  </main>
</div>

<div *ngIf="showLoader">
  <div class="loader"></div>
</div>
